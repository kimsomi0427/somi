<html>
    <head>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, user-scalable=no">
        <!-- <title>Somi's Blog</title> -->
        <title>TEST</title>
        <script src="https://kimsomi0427.github.io/somi/jquery-3.4.1.min.js"></script>
        <script>
			$(function(){
				 $("#img").each(function() {
				        var oImgWidth = $(this).width();
				        var oImgHeight = $(this).height();
				        $(this).css({
				            'max-width':oImgWidth+'px',
				            'max-height':oImgHeight+'px',
				            'width':'100%',
				            'height':'100%'
				        });
				    });


				$(document).on("click","#img",function(e){
					if($("#xValue").val() != "" || $("#yValue").val() != "") {
						alert("이전 태그를 입력해주세요.");
					} else {
						var x = e.offsetX;
						var y = e.offsetY;
						
						$("#inputDiv").show();
						
						$("#xValue").val(x);
						$("#yValue").val(y);
					}
					
				});
				/* $("#img").on("click",function(e){
					if($("#xValue").val() != "" || $("#yValue").val() != "") {
						alert("이전 태그를 입력해주세요.");
					} else {
						var x = e.offsetX;
						var y = e.offsetY;
						
						$("#inputDiv").show();
						
						$("#xValue").val(x);
						$("#yValue").val(y);
					}
				}); */
				
				$("#confirmBtn").on("click", function(){
					if($.trim($("#inputText").val()) == "") {
						alert("입력해주세요.");
						return;
					} else {
						$("#divImg").append("<div class=\"divClass\" style=\"left: "+$("#xValue").val()+"; top: "+$("#yValue").val()
						+"; color:red; z-index:999; position: absolute; word-break:break-all; \" title=\""+ $("#inputText").val() +"\">" + "★" 
						+ "<span>"+ $("#inputText").val() +"</span></div>");
						
						$("#xValue").val("");
						$("#yValue").val("");
						$("#inputText").val("");
						$("#inputDiv").hide();
					}
				});
				
				$(document).on("click",".divClass",function(){
					if ($(this).children().is("visible")) {
						$(this).children().hide();
					} 
					
				});
				
				
				$(".inp-img").on("change", function(){
				    readInputFile(this);
				});

			});
			
			// 등록 이미지 등록 미리보기
			function readInputFile(input) {
			    if(input.files && input.files[0]) {
			        var reader = new FileReader();
			        reader.onload = function (e) {
			        	$("#divImg").append("<img id=\"img\" src="+ e.target.result +" style=\"z-index: -10; max-height: 1500px; max-width: 1000px; \">"); /*  max-height: 1500px; max-width: 1000px;*/
			        }
			        reader.readAsDataURL(input.files[0]);
			    }
			}
		</script>
    </head>
    <body>
        <!-- Hello World!
        <a href="https://kimsomi0427.github.io/somi/index.html">HOME</a>
        <a href="https://kimsomi0427.github.io/somi/Study/javaStudy.html">JAVA</a> -->
        
        <!-- <p ontouchmove="myFunction(event)">ontouchmove</p>
        <p ontouchend="myFunction(event)">ontouchend</p> -->
        
        
        
        
        <input type="hidden" id="xValue" value="" />
        <input type="hidden" id="yValue" value= "" />
        
        <div id="inputDiv" style="display: none">
        	<input type="text" id="inputText"  /> <input type="button" id="confirmBtn" value="Confirm"/>
        </div>
        
        <div id="divImg" style="position: relative; ">
        	<!-- <img id="img" src="https://kimsomi0427.github.io/somi/a.jpg" style="z-index: -10;"/> --> <!-- ontouchstart="myFunction(event)" -->
        </div>
        <input type="file" name="" class="inp-img" accept=".gif, .jpg, .png">
       
    </body>
</html> 
</html>